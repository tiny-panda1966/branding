<section class="section" id="colors">
    <div class="concept-card card">
        <h3>
            <svg viewBox="0 0 24 24" width="20" height="20"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="currentColor"/></svg>
            Colour Palette
        </h3>
        <p>Colours evoke emotions and create instant associations. Our brand pink conveys <strong>creativity, energy, and confidence</strong>. Consistent colour usage reinforces brand recognition. <strong>Click to edit</strong> or <strong>drag & drop to swap</strong> colours.</p>
    </div>
    
    <!-- Swap notification -->
    <div class="swap-notification" id="swapNotification">Colours swapped!</div>
    
    <!-- Custom Color Picker Modal -->
    <div class="color-picker-overlay" id="colorPickerOverlay">
        <div class="color-picker-modal" id="colorPickerModal">
            <div class="picker-header">
                <span class="picker-title">Edit Colour</span>
                <button class="picker-close" onclick="closeColorPicker()">&times;</button>
            </div>
            
            <div class="color-comparison">
                <div class="color-preview-box">
                    <label>Original</label>
                    <div class="color-preview" id="originalColorPreview"></div>
                </div>
                <div class="color-preview-box">
                    <label>New</label>
                    <div class="color-preview" id="newColorPreview"></div>
                </div>
            </div>
            
            <div class="color-input-wrapper">
                <label>Pick a colour</label>
                <div class="color-input-row">
                    <input type="color" class="native-picker" id="nativePicker">
                    <input type="text" class="hex-input" id="hexInput" placeholder="#E43292" maxlength="7">
                </div>
            </div>
            
            <div class="name-input-wrapper">
                <label>Colour name</label>
                <input type="text" class="name-input" id="nameInput" placeholder="Primary Pink">
                <div class="suggested-name" id="suggestedName" onclick="useSuggestedName()"></div>
            </div>
            
            <div class="picker-actions">
                <button class="picker-btn btn-undo" onclick="undoColor()">â†© Undo</button>
                <button class="picker-btn btn-apply" onclick="applyColor()">Apply</button>
            </div>
        </div>
    </div>
    
    <!-- Visual Colour Palette -->
    <div class="card palette-visual-card">
        <div class="palette-visual" id="paletteVisual">
            <!-- Left labels -->
            <div class="palette-label label-primary-02" data-label-for="primary-light">Primary Light</div>
            <div class="palette-label label-primary-01" data-label-for="primary-pink">Primary Pink</div>
            <div class="palette-label label-dark-neutral" data-label-for="dark-neutral">Dark Neutral</div>
            <div class="palette-label label-accent" data-label-for="accent-purple">Accent Purple</div>
            
            <!-- Right labels -->
            <div class="palette-label label-light-neutral" data-label-for="white">White</div>
            <div class="palette-label label-medium-neutral" data-label-for="light-grey">Light Grey</div>
            <div class="palette-label label-secondary-01" data-label-for="secondary-purple">Secondary Purple</div>
            <div class="palette-label label-secondary-02" data-label-for="medium-grey">Medium Grey</div>
            
            <!-- Color blobs -->
            <div class="color-blob blob-primary-01" data-color-id="primary-pink" data-color="#E43292" data-original-color="#E43292" data-color-name="Primary Pink" data-original-name="Primary Pink" data-role="Primary">
                <span class="blob-tooltip">
                    <div class="tooltip-name">Primary Pink</div>
                    <div class="tooltip-codes">#E43292 Â· RGB 228, 50, 146</div>
                </span>
            </div>
            <div class="color-blob blob-primary-02" data-color-id="primary-light" data-color="#F5D0E3" data-original-color="#F5D0E3" data-color-name="Primary Light" data-original-name="Primary Light" data-role="Primary">
                <span class="blob-tooltip">
                    <div class="tooltip-name">Primary Light</div>
                    <div class="tooltip-codes">#F5D0E3 Â· RGB 245, 208, 227</div>
                </span>
            </div>
            <div class="color-blob blob-dark-neutral" data-color-id="dark-neutral" data-color="#1A1A1A" data-original-color="#1A1A1A" data-color-name="Dark Neutral" data-original-name="Dark Neutral" data-role="Dark">
                <span class="blob-tooltip">
                    <div class="tooltip-name">Dark Neutral</div>
                    <div class="tooltip-codes">#1A1A1A Â· RGB 26, 26, 26</div>
                </span>
            </div>
            <div class="color-blob blob-accent" data-color-id="accent-purple" data-color="#9C27B0" data-original-color="#9C27B0" data-color-name="Accent Purple" data-original-name="Accent Purple" data-role="Accent">
                <span class="blob-tooltip">
                    <div class="tooltip-name">Accent Purple</div>
                    <div class="tooltip-codes">#9C27B0 Â· RGB 156, 39, 176</div>
                </span>
            </div>
            <div class="color-blob blob-secondary-01" data-color-id="secondary-purple" data-color="#7B1FA2" data-original-color="#7B1FA2" data-color-name="Secondary Purple" data-original-name="Secondary Purple" data-role="Secondary">
                <span class="blob-tooltip">
                    <div class="tooltip-name">Secondary Purple</div>
                    <div class="tooltip-codes">#7B1FA2 Â· RGB 123, 31, 162</div>
                </span>
            </div>
            <div class="color-blob blob-secondary-02" data-color-id="medium-grey" data-color="#757575" data-original-color="#757575" data-color-name="Medium Grey" data-original-name="Medium Grey" data-role="Medium">
                <span class="blob-tooltip">
                    <div class="tooltip-name">Medium Grey</div>
                    <div class="tooltip-codes">#757575 Â· RGB 117, 117, 117</div>
                </span>
            </div>
            <div class="color-blob blob-light-neutral" data-color-id="white" data-color="#FFFFFF" data-original-color="#FFFFFF" data-color-name="White" data-original-name="White" data-role="">
                <span class="blob-tooltip">
                    <div class="tooltip-name">White</div>
                    <div class="tooltip-codes">#FFFFFF Â· RGB 255, 255, 255</div>
                </span>
            </div>
            <div class="color-blob blob-medium-neutral" data-color-id="light-grey" data-color="#EEEEEE" data-original-color="#EEEEEE" data-color-name="Light Grey" data-original-name="Light Grey" data-role="Light">
                <span class="blob-tooltip">
                    <div class="tooltip-name">Light Grey</div>
                    <div class="tooltip-codes">#EEEEEE Â· RGB 238, 238, 238</div>
                </span>
            </div>
        </div>
        
        <p class="palette-description">A colour palette in branding is a curated set of colours representing your brand's identity and helps create a recognisable, cohesive look across all materials.</p>
        <p class="drag-hint">ðŸ’¡ <strong>Tip:</strong> Drag one colour blob onto another to swap them!</p>
    </div>
    
    <div class="card">
        <div class="card-title">Colour Swatches</div>
        <p style="color: var(--grey-600); margin-bottom: 16px;">Click any colour to copy its value.</p>
        <div class="color-grid">
            <div class="color-card" data-color-id="primary-pink" onclick="copyColor(this.querySelector('.color-hex').textContent)">
                <div class="color-swatch" style="background: #E43292;"></div>
                <div class="color-info">
                    <div class="color-name">Primary Pink</div>
                    <div class="color-values">
                        <div class="color-value"><span>HEX</span><span class="color-hex">#E43292</span></div>
                        <div class="color-value"><span>RGB</span><span class="color-rgb">228, 50, 146</span></div>
                    </div>
                </div>
            </div>
            <div class="color-card" data-color-id="primary-light" onclick="copyColor(this.querySelector('.color-hex').textContent)">
                <div class="color-swatch" style="background: #F5D0E3;"></div>
                <div class="color-info">
                    <div class="color-name">Primary Light</div>
                    <div class="color-values">
                        <div class="color-value"><span>HEX</span><span class="color-hex">#F5D0E3</span></div>
                        <div class="color-value"><span>RGB</span><span class="color-rgb">245, 208, 227</span></div>
                    </div>
                </div>
            </div>
            <div class="color-card" data-color-id="accent-purple" onclick="copyColor(this.querySelector('.color-hex').textContent)">
                <div class="color-swatch" style="background: #9C27B0;"></div>
                <div class="color-info">
                    <div class="color-name">Accent Purple</div>
                    <div class="color-values">
                        <div class="color-value"><span>HEX</span><span class="color-hex">#9C27B0</span></div>
                        <div class="color-value"><span>RGB</span><span class="color-rgb">156, 39, 176</span></div>
                    </div>
                </div>
            </div>
            <div class="color-card" data-color-id="secondary-purple" onclick="copyColor(this.querySelector('.color-hex').textContent)">
                <div class="color-swatch" style="background: #7B1FA2;"></div>
                <div class="color-info">
                    <div class="color-name">Secondary Purple</div>
                    <div class="color-values">
                        <div class="color-value"><span>HEX</span><span class="color-hex">#7B1FA2</span></div>
                        <div class="color-value"><span>RGB</span><span class="color-rgb">123, 31, 162</span></div>
                    </div>
                </div>
            </div>
            <div class="color-card" data-color-id="dark-neutral" onclick="copyColor(this.querySelector('.color-hex').textContent)">
                <div class="color-swatch" style="background: #1A1A1A;"></div>
                <div class="color-info">
                    <div class="color-name">Dark Neutral</div>
                    <div class="color-values">
                        <div class="color-value"><span>HEX</span><span class="color-hex">#1A1A1A</span></div>
                        <div class="color-value"><span>RGB</span><span class="color-rgb">26, 26, 26</span></div>
                    </div>
                </div>
            </div>
            <div class="color-card" data-color-id="medium-grey" onclick="copyColor(this.querySelector('.color-hex').textContent)">
                <div class="color-swatch" style="background: #757575;"></div>
                <div class="color-info">
                    <div class="color-name">Medium Grey</div>
                    <div class="color-values">
                        <div class="color-value"><span>HEX</span><span class="color-hex">#757575</span></div>
                        <div class="color-value"><span>RGB</span><span class="color-rgb">117, 117, 117</span></div>
                    </div>
                </div>
            </div>
            <div class="color-card" data-color-id="light-grey" onclick="copyColor(this.querySelector('.color-hex').textContent)">
                <div class="color-swatch" style="background: #EEEEEE;"></div>
                <div class="color-info">
                    <div class="color-name">Light Grey</div>
                    <div class="color-values">
                        <div class="color-value"><span>HEX</span><span class="color-hex">#EEEEEE</span></div>
                        <div class="color-value"><span>RGB</span><span class="color-rgb">238, 238, 238</span></div>
                    </div>
                </div>
            </div>
            <div class="color-card" data-color-id="white" onclick="copyColor(this.querySelector('.color-hex').textContent)">
                <div class="color-swatch" style="background: #FFFFFF; border: 1px solid #e0e0e0;"></div>
                <div class="color-info">
                    <div class="color-name">White</div>
                    <div class="color-values">
                        <div class="color-value"><span>HEX</span><span class="color-hex">#FFFFFF</span></div>
                        <div class="color-value"><span>RGB</span><span class="color-rgb">255, 255, 255</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="card">
        <div class="card-title">Accessibility Matrix</div>
        <p style="color: var(--grey-600); margin-bottom: 16px;">WCAG 2.1 AA compliance for text/background combinations</p>
        <div class="accessibility-matrix">
            <table class="matrix-table">
                <thead>
                    <tr>
                        <th>Text / BG</th>
                        <th>White</th>
                        <th>Light Grey</th>
                        <th>Brand Pink</th>
                        <th>Dark</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Brand Pink</strong></td>
                        <td class="matrix-pass">âœ“ Pass</td>
                        <td class="matrix-pass">âœ“ Pass</td>
                        <td class="matrix-fail">âœ— Fail</td>
                        <td class="matrix-fail">âœ— Fail</td>
                    </tr>
                    <tr>
                        <td><strong>Dark Grey</strong></td>
                        <td class="matrix-pass">âœ“ Pass</td>
                        <td class="matrix-pass">âœ“ Pass</td>
                        <td class="matrix-pass">âœ“ Pass</td>
                        <td class="matrix-fail">âœ— Fail</td>
                    </tr>
                    <tr>
                        <td><strong>White</strong></td>
                        <td class="matrix-fail">âœ— Fail</td>
                        <td class="matrix-fail">âœ— Fail</td>
                        <td class="matrix-pass">âœ“ Pass</td>
                        <td class="matrix-pass">âœ“ Pass</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</section>

<script>
// ============================================
// COLOR NAME DATABASE
// ============================================
const colorNames = {
    red: ['Red', 'Crimson', 'Scarlet', 'Ruby', 'Cherry', 'Coral', 'Vermillion'],
    orange: ['Orange', 'Tangerine', 'Amber', 'Apricot', 'Peach', 'Rust', 'Copper'],
    yellow: ['Yellow', 'Gold', 'Lemon', 'Mustard', 'Honey', 'Canary', 'Saffron'],
    lime: ['Lime', 'Chartreuse', 'Apple', 'Pear', 'Spring', 'Citrus'],
    green: ['Green', 'Emerald', 'Forest', 'Mint', 'Sage', 'Olive', 'Jade', 'Teal'],
    cyan: ['Cyan', 'Aqua', 'Turquoise', 'Teal', 'Ocean', 'Marine', 'Seafoam'],
    blue: ['Blue', 'Navy', 'Sky', 'Azure', 'Cobalt', 'Sapphire', 'Indigo', 'Royal'],
    purple: ['Purple', 'Violet', 'Lavender', 'Plum', 'Grape', 'Amethyst', 'Orchid'],
    magenta: ['Magenta', 'Fuchsia', 'Pink', 'Rose', 'Cerise', 'Hot Pink', 'Raspberry'],
    pink: ['Pink', 'Rose', 'Blush', 'Salmon', 'Coral', 'Flamingo', 'Bubblegum'],
    neutral: ['Grey', 'Charcoal', 'Slate', 'Silver', 'Ash', 'Stone', 'Graphite']
};

function getColorBaseName(hex) {
    const rgb = hexToRgb(hex);
    const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
    const hue = hsl.h;
    const sat = hsl.s;
    const light = hsl.l;
    
    let colorFamily;
    
    if (sat < 15) {
        if (light > 90) return 'White';
        if (light < 15) return 'Black';
        return light > 50 ? 'Light Grey' : 'Dark Grey';
    }
    
    if (hue < 15 || hue >= 345) colorFamily = 'red';
    else if (hue < 45) colorFamily = 'orange';
    else if (hue < 70) colorFamily = 'yellow';
    else if (hue < 100) colorFamily = 'lime';
    else if (hue < 170) colorFamily = 'green';
    else if (hue < 200) colorFamily = 'cyan';
    else if (hue < 260) colorFamily = 'blue';
    else if (hue < 290) colorFamily = 'purple';
    else if (hue < 330) colorFamily = 'magenta';
    else colorFamily = 'pink';
    
    return colorNames[colorFamily][0];
}

function getColorNameSuggestion(hex, prefix = '') {
    const baseName = getColorBaseName(hex);
    return prefix ? `${prefix} ${baseName}` : baseName;
}

function rgbToHsl(r, g, b) {
    r /= 255; g /= 255; b /= 255;
    const max = Math.max(r, g, b), min = Math.min(r, g, b);
    let h, s, l = (max + min) / 2;
    
    if (max === min) {
        h = s = 0;
    } else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch (max) {
            case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
            case g: h = ((b - r) / d + 2) / 6; break;
            case b: h = ((r - g) / d + 4) / 6; break;
        }
    }
    return { h: h * 360, s: s * 100, l: l * 100 };
}

function hexToRgb(hex) {
    const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
    } : {r: 0, g: 0, b: 0};
}

// ============================================
// DRAG AND DROP FUNCTIONALITY
// ============================================
let draggedBlob = null;
let dragStartX = 0;
let dragStartY = 0;
let blobStartX = 0;
let blobStartY = 0;
let isDraggingBlob = false;
let hasMoved = false;

const blobs = document.querySelectorAll('#colors .color-blob');

blobs.forEach(blob => {
    blob.addEventListener('mousedown', startDrag);
});

document.addEventListener('mousemove', onDrag);
document.addEventListener('mouseup', endDrag);

function startDrag(e) {
    draggedBlob = e.currentTarget;
    dragStartX = e.clientX;
    dragStartY = e.clientY;
    
    const rect = draggedBlob.getBoundingClientRect();
    blobStartX = rect.left;
    blobStartY = rect.top;
    
    isDraggingBlob = true;
    hasMoved = false;
}

function onDrag(e) {
    if (!isDraggingBlob || !draggedBlob) return;
    
    const dx = e.clientX - dragStartX;
    const dy = e.clientY - dragStartY;
    
    if (Math.abs(dx) > 10 || Math.abs(dy) > 10) {
        hasMoved = true;
        draggedBlob.classList.add('dragging');
        
        draggedBlob.style.position = 'fixed';
        draggedBlob.style.left = (blobStartX + dx) + 'px';
        draggedBlob.style.top = (blobStartY + dy) + 'px';
        draggedBlob.style.margin = '0';
        
        blobs.forEach(blob => {
            if (blob !== draggedBlob) {
                blob.classList.remove('drop-target');
                
                const rect = blob.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                const distance = Math.sqrt(
                    Math.pow(e.clientX - centerX, 2) + 
                    Math.pow(e.clientY - centerY, 2)
                );
                
                if (distance < rect.width / 2 + 30) {
                    blob.classList.add('drop-target');
                }
            }
        });
    }
}

function endDrag(e) {
    if (!isDraggingBlob || !draggedBlob) return;
    
    const dropTarget = document.querySelector('#colors .color-blob.drop-target');
    
    if (dropTarget && hasMoved) {
        swapColors(draggedBlob, dropTarget);
    }
    
    draggedBlob.classList.remove('dragging');
    draggedBlob.style.position = '';
    draggedBlob.style.left = '';
    draggedBlob.style.top = '';
    draggedBlob.style.margin = '';
    
    blobs.forEach(blob => blob.classList.remove('drop-target'));
    
    if (!hasMoved) {
        openColorPicker(draggedBlob);
    }
    
    draggedBlob = null;
    isDraggingBlob = false;
    hasMoved = false;
}

function swapColors(blob1, blob2) {
    const color1 = blob1.dataset.color;
    const color2 = blob2.dataset.color;
    const role1 = blob1.dataset.role;
    const role2 = blob2.dataset.role;
    const id1 = blob1.dataset.colorId;
    const id2 = blob2.dataset.colorId;
    
    const newName1 = getColorNameSuggestion(color2, role1);
    const newName2 = getColorNameSuggestion(color1, role2);
    
    blob1.style.background = color2;
    blob1.dataset.color = color2;
    blob1.dataset.colorName = newName1;
    
    blob2.style.background = color1;
    blob2.dataset.color = color1;
    blob2.dataset.colorName = newName2;
    
    updateBlobTooltip(blob1, newName1, color2);
    updateBlobTooltip(blob2, newName2, color1);
    
    updateLabel(id1, newName1);
    updateLabel(id2, newName2);
    
    updateSwatch(id1, color2, newName1);
    updateSwatch(id2, color1, newName2);
    
    showSwapNotification();
    
    const label1 = document.querySelector(`.palette-label[data-label-for="${id1}"]`);
    const label2 = document.querySelector(`.palette-label[data-label-for="${id2}"]`);
    if (label1) label1.classList.add('swapped');
    if (label2) label2.classList.add('swapped');
    setTimeout(() => {
        if (label1) label1.classList.remove('swapped');
        if (label2) label2.classList.remove('swapped');
    }, 1500);
}

function updateBlobTooltip(blob, name, color) {
    const rgb = hexToRgb(color);
    const tooltip = blob.querySelector('.blob-tooltip');
    tooltip.innerHTML = `
        <div class="tooltip-name">${name}</div>
        <div class="tooltip-codes">${color.toUpperCase()} Â· RGB ${rgb.r}, ${rgb.g}, ${rgb.b}</div>
    `;
}

function updateLabel(colorId, name) {
    const label = document.querySelector(`.palette-label[data-label-for="${colorId}"]`);
    if (label) {
        label.textContent = name;
    }
}

function updateSwatch(colorId, color, name) {
    const swatchCard = document.querySelector(`.color-card[data-color-id="${colorId}"]`);
    if (swatchCard) {
        const rgb = hexToRgb(color);
        swatchCard.querySelector('.color-swatch').style.background = color;
        swatchCard.querySelector('.color-name').textContent = name;
        swatchCard.querySelector('.color-hex').textContent = color.toUpperCase();
        swatchCard.querySelector('.color-rgb').textContent = `${rgb.r}, ${rgb.g}, ${rgb.b}`;
    }
}

function showSwapNotification() {
    const notification = document.getElementById('swapNotification');
    notification.classList.add('show');
    setTimeout(() => {
        notification.classList.remove('show');
    }, 2000);
}

// ============================================
// COLOR PICKER FUNCTIONALITY
// ============================================
let activeBlob = null;
let currentColor = '';
let currentName = '';
let suggestedColorName = '';

const overlay = document.getElementById('colorPickerOverlay');
const modal = document.getElementById('colorPickerModal');
const nativePicker = document.getElementById('nativePicker');
const hexInput = document.getElementById('hexInput');
const nameInput = document.getElementById('nameInput');
const suggestedNameEl = document.getElementById('suggestedName');
const originalPreview = document.getElementById('originalColorPreview');
const newPreview = document.getElementById('newColorPreview');

function openColorPicker(blob) {
    activeBlob = blob;
    const originalColor = blob.dataset.originalColor;
    currentColor = blob.dataset.color;
    currentName = blob.dataset.colorName;
    
    nativePicker.value = currentColor;
    hexInput.value = currentColor;
    nameInput.value = currentName;
    originalPreview.style.background = originalColor;
    newPreview.style.background = currentColor;
    
    updateSuggestedName(currentColor);
    overlay.classList.add('active');
}

function updateSuggestedName(hex) {
    const role = activeBlob.dataset.role || '';
    suggestedColorName = getColorNameSuggestion(hex, role);
    suggestedNameEl.textContent = `Suggestion: ${suggestedColorName} (click to use)`;
}

function useSuggestedName() {
    nameInput.value = suggestedColorName;
    currentName = suggestedColorName;
}

function closeColorPicker() {
    overlay.classList.remove('active');
    activeBlob = null;
}

function undoColor() {
    const originalColor = activeBlob.dataset.originalColor;
    const originalName = activeBlob.dataset.originalName;
    currentColor = originalColor;
    currentName = originalName;
    nativePicker.value = originalColor;
    hexInput.value = originalColor;
    nameInput.value = originalName;
    newPreview.style.background = originalColor;
    updateSuggestedName(originalColor);
}

function applyColor() {
    if (!activeBlob) return;
    
    const colorId = activeBlob.dataset.colorId;
    const newName = nameInput.value || currentName;
    
    activeBlob.style.background = currentColor;
    activeBlob.dataset.color = currentColor;
    activeBlob.dataset.colorName = newName;
    
    updateBlobTooltip(activeBlob, newName, currentColor);
    updateLabel(colorId, newName);
    updateSwatch(colorId, currentColor, newName);
    
    closeColorPicker();
}

nativePicker.addEventListener('input', function(e) {
    currentColor = e.target.value.toUpperCase();
    hexInput.value = currentColor;
    newPreview.style.background = currentColor;
    updateSuggestedName(currentColor);
});

hexInput.addEventListener('input', function(e) {
    let val = e.target.value;
    if (!val.startsWith('#')) val = '#' + val;
    if (/^#[0-9A-Fa-f]{6}$/.test(val)) {
        currentColor = val.toUpperCase();
        nativePicker.value = currentColor;
        newPreview.style.background = currentColor;
        updateSuggestedName(currentColor);
    }
});

nameInput.addEventListener('input', function(e) {
    currentName = e.target.value;
});

overlay.addEventListener('click', function(e) {
    if (e.target === overlay) {
        closeColorPicker();
    }
});

// Draggable modal
let isModalDragging = false;
let modalDragOffsetX = 0;
let modalDragOffsetY = 0;

modal.addEventListener('mousedown', function(e) {
    if (e.target.tagName === 'INPUT' || e.target.tagName === 'BUTTON') return;
    isModalDragging = true;
    const rect = modal.getBoundingClientRect();
    modalDragOffsetX = e.clientX - rect.left;
    modalDragOffsetY = e.clientY - rect.top;
    modal.style.cursor = 'grabbing';
});

document.addEventListener('mousemove', function(e) {
    if (!isModalDragging) return;
    modal.style.left = (e.clientX - modalDragOffsetX) + 'px';
    modal.style.top = (e.clientY - modalDragOffsetY) + 'px';
    modal.style.transform = 'none';
});

document.addEventListener('mouseup', function() {
    isModalDragging = false;
    if (modal) modal.style.cursor = 'move';
});
</script>
